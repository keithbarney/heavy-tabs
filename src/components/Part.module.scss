@use '../styles/tokens' as *;

.part {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  justify-content: center;
  background-color: $color-bg-alt;
  border-radius: $radius-sm;
  overflow: hidden;
  width: 100%;
}

// Header section
.header {
  display: flex;
  align-items: flex-start;
  gap: $space-sm;
  padding: $space-sm $space-sm 0;
  width: 100%;
  overflow: hidden;
}

.titleInput {
  flex-shrink: 0;
  min-width: 144px;
}

.notesInput {
  flex: 1;
  min-width: 32px;
}

// Per-part settings (BPM, time, grid)
// Shared base for inline controls â€” matches button-base tokens
$_control-height: 32px;
$_control-height-small: 28px;

.partSettings {
  display: flex;
  align-items: center;
  gap: $space-xs;
  flex-shrink: 0;

  &.small {
    .partBpm {
      height: $_control-height-small;
      padding: $space-xs $space-sm;
    }

    .partSelect {
      height: $_control-height-small;
      padding: $space-xs $space-sm;
      padding-right: 20px;
    }
  }
}

.partBpm {
  height: $_control-height;
  padding: $space-sm $space-md;
  font-family: $font-mono;
  font-size: $font-size-sm;
  color: $color-text;
  background-color: $color-bg;
  border: 1px solid transparent;
  border-radius: $radius-sm;
  outline: none;
  text-align: center;
  transition: border-color $transition-fast;

  &::placeholder {
    color: $color-placeholder;
  }

  &:focus {
    border-color: $color-accent;
  }
}

.partSelect {
  height: $_control-height;
  padding: $space-sm $space-md;
  font-family: $font-mono;
  font-size: $font-size-sm;
  color: $color-text;
  background-color: $color-bg;
  border: 1px solid transparent;
  border-radius: $radius-sm;
  outline: none;
  cursor: pointer;
  transition: border-color $transition-fast;
  appearance: none;
  -webkit-appearance: none;

  // Chevron via background image
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8' viewBox='0 0 8 8'%3E%3Cpath d='M1 2.5L4 5.5L7 2.5' stroke='%23a7adba' stroke-width='1' fill='none'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 4px center;
  padding-right: 16px;

  &:focus {
    border-color: $color-accent;
  }

  option {
    background: $color-bg;
    color: $color-text;
  }
}

// Delete confirmation
.confirmDelete {
  display: flex;
  align-items: center;
  gap: $space-xs;
}

.confirmLabel {
  font-family: $font-mono;
  font-size: $font-size-sm;
  color: $color-text;
  white-space: nowrap;
}

// Body section
.body {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  gap: 0;
  padding: $space-lg;
  width: 100%;
  overflow: hidden;
}

// Bars list container
.barsList {
  display: flex;
  align-items: flex-start;
  gap: $space-sm;
}

// String labels column
.stringLabels {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  width: 7px;
  font-family: $font-mono;
  font-size: $font-size-xs;
  font-weight: 400;
  line-height: 0;
  color: $color-placeholder;
}

.stringLabelSpacer {
  display: flex;
  flex-direction: column;
  justify-content: center;
  height: 18px;
  width: 100%;
}

.stringLabel {
  display: flex;
  flex-direction: column;
  justify-content: center;
  height: $cell-height;
  width: 100%;
  line-height: 10px;
}

// Bars container
.barsContainer {
  display: flex;
  align-items: center;
  gap: $space-sm;
}

// Bar action buttons
.barButtons {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  justify-content: center;
  gap: $space-sm;
  padding-top: 18px;
}

// Print styles
@media print {
  .part {
    background: #fff;
    border-radius: 0;
    break-inside: avoid;
  }

  .header button {
    display: none !important;
  }

  .confirmDelete {
    display: none !important;
  }

  .titleInput,
  .notesInput {
    background: transparent !important;
    color: #000 !important;
    border: none !important;
    box-shadow: none !important;
  }

  .barButtons {
    display: none !important;
  }

  .partSettings {
    display: none !important;
  }

  .barsContainer {
    flex-wrap: wrap;
  }

  .stringLabels,
  .stringLabel {
    color: #000;
  }
}
